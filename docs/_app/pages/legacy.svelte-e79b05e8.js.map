{"version":3,"file":"legacy.svelte-e79b05e8.js","sources":["../../../../../../svelte-zoom/src/matrix.js","../../../../../../svelte-zoom/src/velocity.js","../../../../../../svelte-zoom/src/other.js","../../../../../../svelte-zoom/src/index.svelte"],"sourcesContent":["export default class Matrix {\r\n  constructor(svg) {\r\n    this.svg = svg || document.createElementNS(\"http://www.w3.org/2000/svg\", \"svg\")\r\n\r\n    this.vtm = this.createSVGMatrix()\r\n\r\n    this.x = 0\r\n    this.y = 0\r\n\r\n    this.captureScale = 1\r\n  }\r\n\r\n  clamp(scale, in_x, in_y, ratio) {\r\n    let xx = (window.innerWidth - ratio.width) / 2\r\n    let yy = (window.innerHeight - ratio.height) / 2\r\n\r\n    let limit_max_right_formula = xx * scale + ratio.width * scale - window.innerWidth\r\n\r\n    let same_x = Math.min(this.vtm.e * 1.0, 0)\r\n    let same_y = Math.min(this.vtm.f * 1.0, 0)\r\n\r\n    let value1 = in_x > 0 ? same_x : -(xx * scale)\r\n    let value2 = in_x > 0 ? same_x : -limit_max_right_formula\r\n\r\n    let limit_x_axis = this.vtm.e\r\n    limit_x_axis = Math.max(value2, this.vtm.e)\r\n    limit_x_axis = Math.min(value1, limit_x_axis)\r\n\r\n    let limit_max_bottom_formula = yy * scale + ratio.height * scale - window.innerHeight\r\n    let limit_max_top = in_y > 0 ? same_y : -(yy * scale)\r\n    let limit_max_bottom = in_y > 0 ? same_y : -limit_max_bottom_formula\r\n\r\n    let limit_y_axis = this.vtm.f\r\n    limit_y_axis = Math.min(limit_max_top, limit_y_axis)\r\n    limit_y_axis = Math.max(limit_y_axis, limit_max_bottom)\r\n\r\n    this.vtm = this.createSVGMatrix().translate(limit_x_axis, limit_y_axis).scale(Math.max(this.vtm.a, 1))\r\n  }\r\n\r\n  createSVGMatrix() {\r\n    return this.svg.createSVGMatrix()\r\n  }\r\n\r\n  move(x, y, in_x, in_y, ratio) {\r\n    this.vtm = this.createSVGMatrix()\r\n      .translate(this.x - x, this.y - y)\r\n      .scale(this.vtm.a)\r\n\r\n    this.clamp(this.vtm.a, in_x, in_y, ratio)\r\n    return this.vtm\r\n  }\r\n\r\n  scale(xFactor, yFactor, origin, in_x, in_y, ratio, max, value, dir) {\r\n    // console.log(\"Svelte zoom scale: \", { value }, { max })\r\n    if ((value >= max || this.stop) && dir === 1) {\r\n      this.stop = true\r\n      if (!this.deb) {\r\n        this.captureScale = this.vtm.a\r\n        this.vtm = this.createSVGMatrix()\r\n          .translate(origin.x, origin.y)\r\n          .scale(max / this.captureScale)\r\n          .translate(-origin.x, -origin.y)\r\n          .translate(this.vtm.e, this.vtm.f)\r\n          .scale(this.captureScale)\r\n\r\n        this.deb = true\r\n      }\r\n      return this.vtm\r\n    } else {\r\n      this.stop = false\r\n    }\r\n\r\n    this.vtm = this.createSVGMatrix()\r\n      .translate(origin.x, origin.y)\r\n      .scale(xFactor, yFactor)\r\n      .translate(-origin.x, -origin.y)\r\n      .multiply(this.vtm)\r\n\r\n    let pre_scale = Math.min(Math.max(1, this.vtm.a), max)\r\n\r\n    this.clamp(pre_scale, in_x, in_y, ratio)\r\n\r\n    return this.vtm\r\n  }\r\n}\r\n","export default class MultiTouchVelocity {\r\n  constructor() {\r\n    this.touchA = {\r\n      clientX: 0,\r\n      clientY: 0,\r\n      t: 0,\r\n      velocity: 1,\r\n    }\r\n    this.touchB = {\r\n      clientX: 0,\r\n      clientY: 0,\r\n      t: 0,\r\n      velocity: 1,\r\n    }\r\n  }\r\n  down(touchA, touchB) {\r\n    this.touchA = { clientX: touchA.clientX, clientY: touchA.clientY, t: Date.now(), velocity: 0 }\r\n    this.touchB = { clientX: touchB.clientX, clientY: touchB.clientY, t: Date.now(), veloctiy: 0 }\r\n  }\r\n  calc(touch, ins) {\r\n    var new_x = touch.clientX,\r\n      new_y = touch.clientY,\r\n      new_t = Date.now()\r\n\r\n    var x_dist = new_x - ins.clientX,\r\n      y_dist = new_y - ins.clientY,\r\n      interval = new_t - ins.t\r\n    var velocity = Math.sqrt(x_dist * x_dist + y_dist * y_dist) / interval\r\n    ins.velocity = velocity\r\n    // update values:\r\n    ins.clientX = new_x\r\n    ins.clientY = new_y\r\n    ins.t = new_t\r\n  }\r\n  getVelocity(touchA, touchB) {\r\n    this.calc(touchA, this.touchA)\r\n    this.calc(touchB, this.touchB)\r\n    return this.touchA.velocity + this.touchB.velocity\r\n  }\r\n}\r\n","function calculateAspectRatioFit(srcWidth, srcHeight, maxWidth, maxHeight) {\r\n  var ratio = Math.min(maxWidth / srcWidth, maxHeight / srcHeight)\r\n\r\n  return { width: srcWidth * ratio, height: srcHeight * ratio, ratio }\r\n}\r\n\r\nfunction getDistance(touchA, touchB) {\r\n  return Math.hypot(touchA.pageX - touchB.pageX, touchA.pageY - touchB.pageY)\r\n}\r\n\r\nexport { calculateAspectRatioFit, getDistance }\r\n","<script>\r\n  export let alt\r\n  import Matrix from \"./matrix\"\r\n  import MultiTouchVelocity from \"./velocity\"\r\n\r\n  import { calculateAspectRatioFit, getDistance } from \"./other\"\r\n\r\n  import { onMount } from \"svelte\"\r\n\r\n  let smooth = true\r\n  let touchScreen = false\r\n\r\n  let xY = {\r\n    initX: 0,\r\n    initY: 0,\r\n    newX: 0,\r\n    newY: 0,\r\n  }\r\n\r\n  let ratio, img\r\n\r\n  let matrix\r\n  let contain = null\r\n  let willChange = true\r\n\r\n  let velocity = new MultiTouchVelocity()\r\n\r\n  let lastTap = {\r\n    time: 0,\r\n    x: 0,\r\n    y: 0,\r\n  }\r\n\r\n  let scale = {\r\n    scaling: false,\r\n    x1: 0,\r\n    x2: 0,\r\n    y1: 0,\r\n    y2: 0,\r\n    lastHypo: 0,\r\n    originX: 0,\r\n    originY: 0,\r\n    value: 1,\r\n    max: 1,\r\n  }\r\n\r\n  function fireDown(x, y) {\r\n    xY.initX = x\r\n    xY.initY = y\r\n\r\n    matrix.x = matrix.vtm.e\r\n    matrix.y = matrix.vtm.f\r\n\r\n    willChange = true\r\n  }\r\n\r\n  function fireMove(x, y) {\r\n    if (scale.scaling) return\r\n    let in_x = (window.innerWidth - ratio.width * matrix.vtm.a) / 2\r\n    let in_y = (window.innerHeight - ratio.height * matrix.vtm.a) / 2\r\n\r\n    xY.newX = xY.initX - x\r\n    xY.newY = xY.initY - y\r\n    const mat = matrix.move(in_x >= 0 ? 0 : xY.newX, in_y >= 0 ? 0 : xY.newY, in_x, in_y, ratio)\r\n\r\n    img.style.transform = `matrix(${mat.a},${mat.b},${mat.c},${mat.d},${mat.e}, ${mat.f})`\r\n  }\r\n\r\n  function fireUp() {\r\n    matrix.x -= xY.newX\r\n    matrix.y -= xY.newY\r\n\r\n    scale.scaling = false\r\n    scale.lastHypo = 0\r\n    smooth = true\r\n    willChange = false\r\n  }\r\n\r\n  function fireScale(touchA, touchB) {\r\n    const xTouch = [Math.min(touchA.pageX, touchB.pageX), Math.max(touchA.pageX, touchB.pageX)]\r\n\r\n    const yTouch = [Math.min(touchA.pageY, touchB.pageY), Math.max(touchA.pageY, touchB.pageY)]\r\n\r\n    const W = xTouch[1] - xTouch[0]\r\n    const centerX = W / 2 + xTouch[0]\r\n\r\n    const H = yTouch[1] - yTouch[0]\r\n    const centerY = H / 2 + yTouch[0]\r\n\r\n    scale.originX = centerX\r\n    scale.originY = centerY\r\n    scale.lastHypo = Math.trunc(getDistance(touchA, touchB))\r\n    smooth = false\r\n  }\r\n\r\n  function fireTapScale(x, y) {\r\n    let scaleVtm = matrix.vtm.a\r\n    let scale_value = scaleVtm > 1 ? scaleVtm - 1 : scale.max / 2.5\r\n    let scale_factor = scaleVtm > 1 ? -1 : 1\r\n\r\n    const xFactor = 1 + scale_value * scale_factor\r\n    const yFactor = (xFactor * window.innerHeight) / window.innerWidth\r\n\r\n    let in_x = (window.innerWidth - ratio.width * Math.max(xFactor * scaleVtm, 1)) / 2\r\n    let in_y = (window.innerHeight - ratio.height * Math.max(xFactor * scaleVtm, 1)) / 2\r\n\r\n    const origin = {\r\n      x: in_x > 0 ? window.innerWidth / 2 : x,\r\n      y: in_y > 0 ? window.innerHeight / 2 : y,\r\n    }\r\n\r\n    const mat = matrix.scale(xFactor, yFactor, origin, in_x, in_y, ratio, scale.max, scale.value * xFactor, scale_factor)\r\n\r\n    scale.value = mat.d\r\n    img.style.transform = `translate(${mat.e}px, ${mat.f}px) scale(${mat.d})`\r\n  }\r\n\r\n  function fireScaleMove(touchA, touchB, e) {\r\n    const hypo = getDistance(touchA, touchB)\r\n\r\n    let f = hypo / scale.lastHypo\r\n\r\n    f = f >= 1 ? 1 : -1\r\n\r\n    const ff = velocity.getVelocity(touchA, touchB) || 1\r\n\r\n    const xFactor = 1 + 0.1 * ff * f\r\n\r\n    const yFactor = (xFactor * window.innerHeight) / window.innerWidth\r\n\r\n    let in_x = (window.innerWidth - ratio.width * matrix.vtm.a) / 2\r\n    let in_y = (window.innerHeight - ratio.height * matrix.vtm.a) / 2\r\n\r\n    const origin = {\r\n      x: in_x > 0 ? window.innerWidth / 2 : scale.originX,\r\n      y: in_y > 0 ? window.innerHeight / 2 : scale.originY,\r\n    }\r\n\r\n    const mat = matrix.scale(xFactor, yFactor, origin, in_x, in_y, ratio, scale.max, scale.value * xFactor, f)\r\n\r\n    img.style.transform = `translate(${mat.e}px, ${mat.f}px) scale(${mat.d})`\r\n\r\n    scale.value = mat.d\r\n\r\n    scale.lastHypo = hypo\r\n    scale.scaling = true\r\n  }\r\n\r\n  function fireManualZoom(dir) {\r\n    const xFactor = 1 + 0.2 * dir\r\n    const yFactor = (xFactor * window.innerHeight) / window.innerWidth\r\n\r\n    let in_x = (window.innerWidth - ratio.width * matrix.vtm.a) / 2\r\n    let in_y = (window.innerHeight - ratio.height * matrix.vtm.a) / 2\r\n\r\n    const origin = {\r\n      x: window.innerWidth / 2,\r\n      y: window.innerHeight / 2,\r\n    }\r\n\r\n    const mat = matrix.scale(xFactor, yFactor, origin, in_x, in_y, ratio, scale.max, scale.value * xFactor, dir)\r\n    img.style.transform = `translate(${mat.e}px,${mat.f}px) scale(${mat.d})`\r\n    scale.value = mat.d\r\n  }\r\n\r\n  export const zoomIn = () => fireManualZoom(1)\r\n\r\n  export const zoomOut = () => fireManualZoom(-1)\r\n\r\n  function onResize() {\r\n    onLoad()\r\n    fireDown(0, 0)\r\n    fireMove(0, 0)\r\n    fireUp()\r\n  }\r\n\r\n  function onWheel(e) {\r\n    e.preventDefault()\r\n    const dir = e.deltaY < 0 ? 1 : -1\r\n\r\n    const xFactor = 1 + 0.1 * dir\r\n    const yFactor = (xFactor * window.innerHeight) / window.innerWidth\r\n\r\n    let in_x = (window.innerWidth - ratio.width * matrix.vtm.a) / 2\r\n    let in_y = (window.innerHeight - ratio.height * matrix.vtm.a) / 2\r\n\r\n    const origin = {\r\n      x: in_x > 0 ? window.innerWidth / 2 : e.pageX,\r\n      y: in_y > 0 ? window.innerHeight / 2 : e.pageY,\r\n    }\r\n\r\n    const mat = matrix.scale(xFactor, yFactor, origin, in_x, in_y, ratio, scale.max, scale.value * xFactor, dir)\r\n    img.style.transform = `translate(${mat.e}px,${mat.f}px) scale(${mat.d})`\r\n    scale.value = mat.d\r\n  }\r\n\r\n  function onLoad() {\r\n    const { naturalWidth, naturalHeight } = img\r\n\r\n    contain = naturalWidth > window.innerWidth || naturalHeight > window.innerHeight\r\n\r\n    console.log(\"onLoad: \", { max: scale.max })\r\n\r\n    scale.max =\r\n      (naturalWidth > naturalHeight\r\n        ? Math.max(naturalWidth / window.innerWidth, 1)\r\n        : Math.max(naturalHeight / window.innerHeight, 1)) * 10\r\n    ratio = calculateAspectRatioFit(naturalWidth, naturalHeight, window.innerWidth, window.innerHeight)\r\n\r\n    console.log(\"after onLoad: \", { max: scale.max })\r\n  }\r\n\r\n  onMount(() => {\r\n    matrix = new Matrix()\r\n    window.addEventListener(\"wheel\", onWheel, { passive: false })\r\n    window.addEventListener(\"resize\", onResize)\r\n    return () => {\r\n      window.removeEventListener(\"wheel\", onWheel)\r\n      window.removeEventListener(\"resize\", onResize)\r\n    }\r\n  })\r\n\r\n  function onTouchStart(e) {\r\n    touchScreen = true\r\n    willChange = true\r\n    const isMultiTouch = e.touches.length === 2\r\n    const [touchA, touchB] = e.touches\r\n\r\n    scale.scaling = isMultiTouch\r\n\r\n    smooth = false\r\n    if (isMultiTouch) {\r\n      fireScale(touchA, touchB)\r\n\r\n      velocity.down(touchA, touchB)\r\n    } else {\r\n      const { pageX, pageY } = touchA\r\n      var now = new Date().getTime()\r\n      if (now - lastTap.time < 250 && Math.hypot(lastTap.x - pageX, lastTap.y - pageY) <= 20) {\r\n        smooth = true\r\n        fireTapScale(pageX, pageY)\r\n      } else {\r\n        fireDown(pageX, pageY)\r\n      }\r\n\r\n      lastTap = {\r\n        time: now,\r\n        x: pageX,\r\n        y: pageY,\r\n      }\r\n    }\r\n\r\n    window.removeEventListener(\"touchmove\", onTouchMove)\r\n    window.removeEventListener(\"touchend\", onTouchEnd)\r\n    window.addEventListener(\"touchmove\", onTouchMove)\r\n    window.addEventListener(\"touchend\", onTouchEnd)\r\n  }\r\n\r\n  function onTouchMove(e) {\r\n    if (scale.scaling) {\r\n      const [touchA, touchB] = e.touches\r\n      fireScaleMove(touchA, touchB)\r\n    } else {\r\n      fireMove(e.touches[0].pageX, e.touches[0].pageY)\r\n    }\r\n  }\r\n\r\n  function onTouchEnd(e) {\r\n    fireUp()\r\n    window.removeEventListener(\"touchmove\", onTouchMove)\r\n    window.removeEventListener(\"touchend\", onTouchEnd)\r\n    window.removeEventListener(\"touchcancel\", onTouchEnd)\r\n  }\r\n\r\n  function onMouseDown({ clientX, clientY }) {\r\n    if (touchScreen) return\r\n    fireDown(clientX, clientY)\r\n\r\n    smooth = false\r\n\r\n    window.addEventListener(\"mousemove\", onMouseMove)\r\n    window.addEventListener(\"mouseup\", onMouseUp)\r\n  }\r\n\r\n  function onMouseMove({ clientX, clientY }) {\r\n    fireMove(clientX, clientY)\r\n  }\r\n\r\n  function onMouseUp() {\r\n    window.removeEventListener(\"mousemove\", onMouseMove)\r\n    fireUp()\r\n  }\r\n\r\n  const mousedown = onMouseDown\r\n  const touchstart = onTouchStart\r\n</script>\r\n\r\n<style>\r\n  .c-svelteZoom {\r\n    width: 100%;\r\n    height: 100%;\r\n    position: absolute;\r\n    transform-origin: 0 0;\r\n    backface-visibility: hidden;\r\n    -webkit-backface-visibility: hidden;\r\n    -moz-backface-visibility: hidden;\r\n    -o-backface-visibility: hidden;\r\n    -ms-backface-visibility: hidden;\r\n    -webkit-user-drag: none;\r\n    -moz-user-drag: none;\r\n    -o-user-drag: none;\r\n    user-drag: none;\r\n    touch-action: none;\r\n  }\r\n\r\n  .c-svelteZoom--contain {\r\n    object-fit: contain;\r\n  }\r\n\r\n  .c-svelteZoom--no-contain {\r\n    object-fit: contain;\r\n  }\r\n\r\n  .c-svelteZoom--transition {\r\n    transition: transform 0.2s;\r\n  }\r\n\r\n  .c-svelteZoom--visible {\r\n    visibility: visible;\r\n  }\r\n\r\n  .c-svelteZoom--hidden {\r\n    visibility: hidden;\r\n  }\r\n\r\n  .c-svelteZoom--willChange {\r\n    will-change: transform;\r\n  }\r\n</style>\r\n\r\n<img\r\n  {alt}\r\n  class=\"c-svelteZoom\"\r\n  class:c-svelteZoom--contain={contain}\r\n  class:c-svelteZoom--no-contain={!contain}\r\n  class:c-svelteZoom--transition={smooth}\r\n  class:c-svelteZoom--visible={contain}\r\n  class:c-svelteZoom--hidden={contain === null}\r\n  class:c-svelteZoom--willChange={willChange}\r\n  bind:this={img}\r\n  on:mousedown={mousedown}\r\n  on:touchstart={touchstart}\r\n  on:load={onLoad}\r\n  {...$$props} />\r\n"],"names":[],"mappings":"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"}